# DevOps-–ø—Ä–æ–µ–∫—Ç: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ Kubernetes —Å Prometheus –∏ Grafana

## –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Prometheus –∏ Grafana, –∞ —Ç–∞–∫–∂–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU, –ø–∞–º—è—Ç–∏ (RAM) –∏ –¥–∏—Å–∫–∞.

---

## –≠—Ç–∞–ø 1. –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ Prometheus –∏ Grafana

–î–ª—è –Ω–∞—á–∞–ª–∞ –±—ã–ª —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç –∫–ª–∞—Å—Ç–µ—Ä —Å –ø–æ–º–æ—â—å—é minikube, –∞ –∑–∞—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
minikube start
kubectl create namespace monitoring
helm install prometheus prometheus-community/kube-prometheus-stack -n monitoring
```



---

## üß© –≠—Ç–∞–ø 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ `deployment.yaml`

–î–∞–ª–µ–µ –±—ã–ª –ø—Ä–∏–º–µ–Ω—ë–Ω –º–∞–Ω–∏—Ñ–µ—Å—Ç `deployment.yaml`, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–ø–ª–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

üì∏ *–§—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ deployment.yaml:*  
![Deployment](IMG_4932.jpeg)

---

## üìä –≠—Ç–∞–ø 3. –ú–µ—Ç—Ä–∏–∫–∏ CPU

–ú–µ—Ç—Ä–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ:

```promql
100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)
```

üìà *–ì—Ä–∞—Ñ–∏–∫ –∑–∞–≥—Ä—É–∑–∫–∏ CPU:*  
![CPU usage](IMG_4892.jpeg)

---

## üíæ –≠—Ç–∞–ø 4. –ú–µ—Ç—Ä–∏–∫–∏ –ø–∞–º—è—Ç–∏ (Memory usage)

–ú–µ—Ç—Ä–∏–∫–∞:

```promql
100 * (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes))
```

üìà *–ì—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏:*  
![Memory usage](IMG_4893.jpeg)

---

## üíΩ –≠—Ç–∞–ø 5. –ú–µ—Ç—Ä–∏–∫–∏ –¥–∏—Å–∫–∞ (Disk usage)

–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

```promql
100 - ((node_filesystem_avail_bytes{mountpoint="/"} * 100) / node_filesystem_size_bytes{mountpoint="/"})
```

üìà *–ì—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞:*  
![Disk usage](IMG_4894.jpeg)

---

## üö® –≠—Ç–∞–ø 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

–í Grafana –±—ã–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ CPU –≤—ã—à–µ 80%.

üì∏ *–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∞–ª–µ—Ä—Ç–∞:*  
![Alert](IMG_4934.jpeg)

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—ã–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è:

- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes;  
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ CPU, RAM –∏ –¥–∏—Å–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏;  
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Alerts) –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏.

---
